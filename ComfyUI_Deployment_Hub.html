<!-- Chosen Palette: Dark Mode Developer Theme (Slate/Emerald/Cyan) - Inspiring a terminal/IDE feel appropriate for technical deployment tasks. -->
<!-- Application Structure Plan: 
    1. Hero Section: Title and objective summary.
    2. Interactive Resource Estimator (Chart.js): Visualizes VRAM requirements for different models mentioned in the guide (Flux, SVD, SV4D) to help users plan hardware.
    3. Progressive Deployment Guide (Main Content): A vertical stepper layout divided into the 6 stages from the source report.
        - Stages are collapsible/expandable.
        - Code snippets have "Copy" functionality.
        - "Model Management" stage uses tabs to switch between Flux, SVD, and SV4D specific file structures to avoid clutter.
    4. Workflow Visualizer: CSS-based flowcharts representing the node connections described for Flux and SV4D.
    5. Troubleshooting & Optimization: Grid of cards for quick solutions and pro tips.
    6. Navigation: Sticky table of contents for quick jumping.
    WHY: This structure transforms a linear markdown file into an actionable, tool-like experience. The VRAM chart adds immediate value for decision making. The tabbed model section reduces cognitive load.
-->
<!-- Visualization & Content Choices:
    - VRAM Usage Chart (Chart.js): Goal -> Inform/Compare. Visualizes the "Low VRAM" warnings and model requirements. Justification: Helps users immediately assess if their hardware fits.
    - File Tree Visuals (HTML/CSS + Unicode): Goal -> Organize. Shows folder structures clearly. Justification: Clearer than text paths.
    - Workflow Node Diagrams (HTML/CSS Flexbox): Goal -> Explain. Visualizes the abstract "connect A to B" instructions. Justification: Visual learners need to see the node flow.
    - Interaction: Tab switching for models, Copy buttons for code, Accordions for steps.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ComfyUI å…¨èƒ½éƒ¨ç½²ä¸­å¿ƒ (Flux/SVD/SV4D)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0f172a; /* Slate 900 */
            color: #e2e8f0; /* Slate 200 */
        }
        .mono {
            font-family: 'JetBrains+Mono', monospace;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            height: 300px;
        }
        .code-block {
            background-color: #1e293b; /* Slate 800 */
            border-radius: 0.5rem;
            border: 1px solid #334155;
            position: relative;
            overflow: hidden;
        }
        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #334155;
            color: #94a3b8;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        .copy-btn:hover {
            background-color: #475569;
            color: #fff;
        }
        .copy-btn.copied {
            background-color: #10b981;
            color: white;
        }
        /* Workflow Diagram Styles */
        .node-box {
            background-color: #334155;
            border: 2px solid #64748b;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            width: 140px;
            font-size: 0.85rem;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            position: relative;
        }
        .arrow-right::after {
            content: "â†’";
            font-size: 24px;
            color: #94a3b8;
            margin: 0 10px;
        }
        .workflow-row {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #475569; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b; 
        }
    </style>
</head>
<body class="antialiased selection:bg-cyan-500 selection:text-white">

    <!-- Navigation -->
    <nav class="sticky top-0 z-50 bg-slate-900/95 backdrop-blur border-b border-slate-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center gap-2">
                    <span class="text-2xl">ğŸš€</span>
                    <span class="font-bold text-xl text-cyan-400 tracking-tight">ComfyUI éƒ¨ç½²ä¸­å¿ƒ</span>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <button onclick="scrollToSection('environment')" class="text-slate-300 hover:text-white hover:bg-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">ç’°å¢ƒæº–å‚™</button>
                        <button onclick="scrollToSection('models')" class="text-slate-300 hover:text-white hover:bg-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">æ¨¡å‹é…ç½®</button>
                        <button onclick="scrollToSection('workflows')" class="text-slate-300 hover:text-white hover:bg-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">å·¥ä½œæµ</button>
                        <button onclick="scrollToSection('tips')" class="text-slate-300 hover:text-white hover:bg-slate-700 px-3 py-2 rounded-md text-sm font-medium transition">å„ªåŒ–èˆ‡é™¤éŒ¯</button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-emerald-400 mb-4">
                Ubuntu + ComfyUI å…¨èƒ½éƒ¨ç½²æŒ‡å—
            </h1>
            <p class="text-xl text-slate-400 max-w-3xl mx-auto">
                ä¸€ç«™å¼æ•´åˆ Flux.1 Dev (æœ€å¼·é–‹æºæ–‡ç”Ÿåœ–)ã€SVD (åœ–ç”Ÿè¦–é ») èˆ‡ SV4D (3D å‹•æ…‹è¦–è§’)ã€‚
                å°ˆç‚º Ubuntu 22.04/24.04 ç³»çµ±è¨­è¨ˆã€‚
            </p>
        </div>

        <!-- VRAM Analysis Section -->
        <section class="mb-16 bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl">
            <div class="flex flex-col md:flex-row gap-8 items-center">
                <div class="w-full md:w-1/3">
                    <h2 class="text-2xl font-bold text-white mb-4">ç¡¬é«”éœ€æ±‚åˆ†æ</h2>
                    <p class="text-slate-300 mb-4">
                        éƒ¨ç½²å‰è«‹å…ˆè©•ä¼°æ‚¨çš„é¡¯å¡ VRAMã€‚Flux.1 Dev æ˜¯ç›®å‰å°ç¡¬é«”è¦æ±‚æœ€é«˜çš„æ¨¡å‹ä¹‹ä¸€ã€‚æœ¬åœ–è¡¨åŸºæ–¼æŒ‡å—ä¸­çš„å»ºè­°èˆ‡é‡åŒ–å„ªåŒ–æ–¹æ¡ˆé€²è¡Œä¼°ç®—ã€‚
                    </p>
                    <ul class="space-y-2 text-sm text-slate-400">
                        <li class="flex items-center gap-2"><span class="w-2 h-2 bg-red-500 rounded-full"></span> å»ºè­°é…ç½®: 24GB+ (RTX 3090/4090)</li>
                        <li class="flex items-center gap-2"><span class="w-2 h-2 bg-yellow-500 rounded-full"></span> é‡åŒ–é…ç½®: 12GB+ (FP8/GGUF)</li>
                        <li class="flex items-center gap-2"><span class="w-2 h-2 bg-blue-500 rounded-full"></span> åŸºç¤é…ç½®: 8GB+ (SVD/SV4D)</li>
                    </ul>
                </div>
                <div class="w-full md:w-2/3">
                    <div class="chart-container">
                        <canvas id="vramChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Deployment Steps -->
        <div class="space-y-8" id="environment">
            
            <!-- Stage 1 & 2: Environment & Installation -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- System Prep -->
                <div class="bg-slate-800 rounded-xl p-6 border-l-4 border-cyan-500 shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-cyan-900 text-cyan-300 w-8 h-8 flex items-center justify-center rounded-full font-bold">1</span>
                        <h3 class="text-xl font-bold text-white">ç³»çµ±ç’°å¢ƒæº–å‚™</h3>
                    </div>
                    <p class="text-slate-400 mb-4 text-sm">ç¢ºä¿ç³»çµ±é©…å‹•èˆ‡åŸºç¤ä¾è³´æ˜¯æœ€æ–°çš„ã€‚é€™æ˜¯ç©©å®šé‹è¡Œçš„åŸºç¤ã€‚</p>
                    
                    <div class="space-y-4">
                        <div>
                            <p class="text-xs text-slate-500 mb-1 uppercase tracking-wider font-bold">æ›´æ–°ç³»çµ±å·¥å…·</p>
                            <div class="code-block p-3">
                                <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
                                <code class="text-sm text-green-400 mono block whitespace-pre-wrap">sudo apt update && sudo apt upgrade -y
sudo apt install -y git python3-venv python3-pip build-essential libgl1 libglib2.0-0</code>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs text-slate-500 mb-1 uppercase tracking-wider font-bold">é©—è­‰ NVIDIA é©…å‹• (éœ€ CUDA 12.1+)</p>
                            <div class="code-block p-3">
                                <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
                                <code class="text-sm text-green-400 mono block">nvidia-smi</code>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ComfyUI Setup -->
                <div class="bg-slate-800 rounded-xl p-6 border-l-4 border-emerald-500 shadow-lg">
                    <div class="flex items-center gap-3 mb-4">
                        <span class="bg-emerald-900 text-emerald-300 w-8 h-8 flex items-center justify-center rounded-full font-bold">2</span>
                        <h3 class="text-xl font-bold text-white">å®‰è£ ComfyUI èˆ‡ä¾è³´</h3>
                    </div>
                    <p class="text-slate-400 mb-4 text-sm">ä½¿ç”¨è™›æ“¬ç’°å¢ƒéš”é›¢ä¾è³´ï¼Œä¸¦å®‰è£é—œéµçš„ PyTorch ç‰ˆæœ¬ã€‚</p>
                    
                    <div class="space-y-4">
                        <div>
                            <p class="text-xs text-slate-500 mb-1 uppercase tracking-wider font-bold">å…‹éš†èˆ‡è™›æ“¬ç’°å¢ƒ</p>
                            <div class="code-block p-3">
                                <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
                                <code class="text-sm text-green-400 mono block whitespace-pre-wrap">cd ~
git clone https://github.com/comfyanonymous/ComfyUI.git
cd ComfyUI
python3 -m venv venv
source venv/bin/activate</code>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs text-slate-500 mb-1 uppercase tracking-wider font-bold">å®‰è£ PyTorch (CUDA 12.1)</p>
                            <div class="code-block p-3">
                                <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
                                <code class="text-sm text-green-400 mono block whitespace-pre-wrap">pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu121
pip install -r requirements.txt</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stage 3: ComfyUI Manager -->
            <div class="bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-lg relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <span class="text-6xl">âš™ï¸</span>
                </div>
                <h3 class="text-xl font-bold text-white mb-2">ç¬¬ä¸‰éšæ®µï¼šå®‰è£ ComfyUI Manager (å¿…å‚™)</h3>
                <p class="text-slate-400 mb-4">é€™æ˜¯ä¸€å€‹å¼·å¤§çš„æ’ä»¶ç®¡ç†å™¨ï¼Œèƒ½è‡ªå‹•è§£æ±ºç¯€é»ç¼ºå¤±å•é¡Œã€‚</p>
                <div class="code-block p-4 max-w-2xl">
                    <button class="copy-btn" onclick="copyCode(this)">è¤‡è£½</button>
                    <code class="text-sm text-green-400 mono block whitespace-pre-wrap">cd custom_nodes
git clone https://github.com/ltdrdata/ComfyUI-Manager.git
cd ..</code>
                </div>
            </div>

            <!-- Stage 4: Model Configuration (Interactive) -->
            <div id="models" class="bg-slate-900 rounded-xl border border-slate-700 p-1 shadow-xl">
                <div class="bg-slate-800 rounded-t-xl p-6 border-b border-slate-700">
                    <h2 class="text-2xl font-bold text-white">ç¬¬å››éšæ®µï¼šæ¨¡å‹ä¸‹è¼‰èˆ‡æ¶æ§‹</h2>
                    <p class="text-slate-400 mt-2">
                        é€™æ˜¯ã€Œä¸‰åˆä¸€ã€éƒ¨ç½²çš„æ ¸å¿ƒã€‚ç”±æ–¼ Flux æ¶æ§‹ç‰¹æ®Šï¼Œæ–‡ä»¶å­˜æ”¾ä½ç½®èˆ‡å‚³çµ± SD ä¸åŒã€‚
                        <br><span class="text-yellow-400 text-sm">ğŸ’¡ é»æ“Šä¸‹æ–¹æ¨™ç±¤åˆ‡æ›ä¸åŒæ¨¡å‹çš„é…ç½®æŒ‡å—</span>
                    </p>
                </div>
                
                <!-- Tabs -->
                <div class="flex border-b border-slate-700 bg-slate-800/50">
                    <button onclick="switchTab('flux')" id="tab-flux" class="flex-1 py-4 text-center font-bold text-cyan-400 border-b-2 border-cyan-400 bg-slate-800 transition-colors">
                        Flux.1 Dev (æ–‡ç”Ÿåœ–)
                    </button>
                    <button onclick="switchTab('svd')" id="tab-svd" class="flex-1 py-4 text-center font-bold text-slate-400 hover:text-white transition-colors">
                        SVD (åœ–ç”Ÿè¦–é »)
                    </button>
                    <button onclick="switchTab('sv4d')" id="tab-sv4d" class="flex-1 py-4 text-center font-bold text-slate-400 hover:text-white transition-colors">
                        SV4D (3D å‹•æ…‹)
                    </button>
                </div>

                <!-- Tab Contents -->
                <div class="p-6 bg-slate-900 min-h-[400px]">
                    
                    <!-- Flux Content -->
                    <div id="content-flux" class="block animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">Flux.1 Dev éƒ¨ç½²é‚è¼¯</h4>
                                <p class="text-slate-400 text-sm mb-4">Flux éœ€è¦å°‡æ¨¡å‹æ‹†åˆ†ç‚º UNETã€CLIP å’Œ VAE ä¸‰å€‹éƒ¨åˆ†ä»¥ç²å¾—æœ€ä½³æ€§èƒ½ã€‚</p>
                                <ul class="space-y-4">
                                    <li class="bg-slate-800 p-3 rounded border border-slate-700">
                                        <strong class="text-cyan-300 block mb-1">1. UNET æ¨¡å‹</strong>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: flux1-dev.safetensors</span>
                                        <span class="text-xs text-slate-400 mono block mt-1">å­˜æ”¾: ComfyUI/models/unet/</span>
                                    </li>
                                    <li class="bg-slate-800 p-3 rounded border border-slate-700">
                                        <strong class="text-cyan-300 block mb-1">2. CLIP æ¨¡å‹ (T5 + CLIP-L)</strong>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: t5xxl_fp16.safetensors (æˆ– fp8)</span>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: clip_l.safetensors</span>
                                        <span class="text-xs text-slate-400 mono block mt-1">å­˜æ”¾: ComfyUI/models/clip/</span>
                                    </li>
                                    <li class="bg-slate-800 p-3 rounded border border-slate-700">
                                        <strong class="text-cyan-300 block mb-1">3. VAE æ¨¡å‹</strong>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: ae.safetensors</span>
                                        <span class="text-xs text-slate-400 mono block mt-1">å­˜æ”¾: ComfyUI/models/vae/</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-slate-950 p-4 rounded-lg border border-slate-800 font-mono text-sm text-slate-300">
                                <div class="text-slate-500 mb-2"># æ–‡ä»¶çµæ§‹é è¦½</div>
                                <ul class="pl-2 space-y-1">
                                    <li>ğŸ“ ComfyUI/</li>
                                    <li class="pl-4">ğŸ“ models/</li>
                                    <li class="pl-8 text-cyan-400">ğŸ“ unet/</li>
                                    <li class="pl-12">ğŸ“„ flux1-dev.safetensors</li>
                                    <li class="pl-8 text-cyan-400">ğŸ“ clip/</li>
                                    <li class="pl-12">ğŸ“„ t5xxl_fp16.safetensors</li>
                                    <li class="pl-12">ğŸ“„ clip_l.safetensors</li>
                                    <li class="pl-8 text-cyan-400">ğŸ“ vae/</li>
                                    <li class="pl-12">ğŸ“„ ae.safetensors</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- SVD Content -->
                    <div id="content-svd" class="hidden animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">SVD (Stable Video Diffusion) éƒ¨ç½²</h4>
                                <p class="text-slate-400 text-sm mb-4">SVD æ˜¯åŸºç¤çš„åœ–ç”Ÿè¦–é »æ¨¡å‹ï¼Œéƒ¨ç½²ç›¸å°ç°¡å–®ï¼Œä½œç‚ºæ¨™æº– Checkpoint åŠ è¼‰ã€‚</p>
                                <ul class="space-y-4">
                                    <li class="bg-slate-800 p-3 rounded border border-slate-700">
                                        <strong class="text-purple-300 block mb-1">SVD Checkpoint</strong>
                                        <span class="text-xs text-slate-500 block">ä¸‹è¼‰: stabilityai/stable-video-diffusion-img2vid-xt</span>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: svd_xt.safetensors</span>
                                        <span class="text-xs text-slate-400 mono block mt-1">å­˜æ”¾: ComfyUI/models/checkpoints/</span>
                                    </li>
                                </ul>
                            </div>
                            <div class="bg-slate-950 p-4 rounded-lg border border-slate-800 font-mono text-sm text-slate-300">
                                <div class="text-slate-500 mb-2"># æ–‡ä»¶çµæ§‹é è¦½</div>
                                <ul class="pl-2 space-y-1">
                                    <li>ğŸ“ ComfyUI/</li>
                                    <li class="pl-4">ğŸ“ models/</li>
                                    <li class="pl-8 text-purple-400">ğŸ“ checkpoints/</li>
                                    <li class="pl-12">ğŸ“„ svd_xt.safetensors</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- SV4D Content -->
                    <div id="content-sv4d" class="hidden animate-fade-in">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-bold text-white mb-4">SV4D (Stable Video 4D) éƒ¨ç½²</h4>
                                <p class="text-slate-400 text-sm mb-4">SV4D ç”¨æ–¼ç”Ÿæˆå‹•æ…‹ 3D è¦–è§’è¦–é »ï¼ˆå¤šè¦–è§’ç”Ÿæˆï¼‰ï¼ŒåŒæ¨£ä½œç‚º Checkpoint åŠ è¼‰ã€‚</p>
                                <ul class="space-y-4">
                                    <li class="bg-slate-800 p-3 rounded border border-slate-700">
                                        <strong class="text-pink-300 block mb-1">SV4D Checkpoint</strong>
                                        <span class="text-xs text-slate-500 block">ä¸‹è¼‰: stabilityai/sv4d</span>
                                        <span class="text-xs text-slate-500 block">æ–‡ä»¶: sv4d.safetensors</span>
                                        <span class="text-xs text-slate-400 mono block mt-1">å­˜æ”¾: ComfyUI/models/checkpoints/</span>
                                    </li>
                                </ul>
                                <div class="mt-4 p-3 bg-yellow-900/30 border border-yellow-700/50 rounded">
                                    <p class="text-xs text-yellow-200">
                                        âš ï¸ <strong>æ³¨æ„ï¼š</strong> SV4D éœ€è¦é¡å¤–çš„ç¯€é»æ”¯æŒã€‚è«‹åœ¨å•Ÿå‹•å¾Œé€šé Manager å®‰è£ <code>ComfyUI VideoHelperSuite</code> å’Œ <code>ComfyUI Essentials</code>ã€‚
                                    </p>
                                </div>
                            </div>
                            <div class="bg-slate-950 p-4 rounded-lg border border-slate-800 font-mono text-sm text-slate-300">
                                <div class="text-slate-500 mb-2"># æ–‡ä»¶çµæ§‹é è¦½</div>
                                <ul class="pl-2 space-y-1">
                                    <li>ğŸ“ ComfyUI/</li>
                                    <li class="pl-4">ğŸ“ models/</li>
                                    <li class="pl-8 text-pink-400">ğŸ“ checkpoints/</li>
                                    <li class="pl-12">ğŸ“„ sv4d.safetensors</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Stage 5 & 6: Startup & Workflow Visualizer -->
            <div id="workflows" class="space-y-8">
                <div class="bg-slate-800 rounded-xl p-6 border-l-4 border-indigo-500 shadow-lg">
                    <h3 class="text-xl font-bold text-white mb-4">ç¬¬äº”éšæ®µï¼šå•Ÿå‹• ComfyUI</h3>
                    <div class="code-block p-4 flex justify-between items-center">
                        <code class="text-green-400 mono text-lg">python main.py --listen</code>
                        <button class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm transition" onclick="copyCode(this.parentElement)">è¤‡è£½å‘½ä»¤</button>
                    </div>
                    <p class="text-slate-400 mt-2 text-sm">ç€è¦½å™¨è¨ªå•: <a href="http://127.0.0.1:8188" target="_blank" class="text-indigo-400 hover:underline">http://127.0.0.1:8188</a></p>
                </div>

                <!-- Visual Workflows -->
                <div class="bg-slate-800 rounded-xl p-8 border border-slate-700 shadow-lg">
                    <h2 class="text-2xl font-bold text-white mb-6 text-center">å·¥ä½œæµæ­å»ºé‚è¼¯å¯è¦–åŒ–</h2>
                    
                    <!-- Flux Workflow Diagram -->
                    <div class="mb-12">
                        <h4 class="text-cyan-400 font-bold mb-4 text-center">Flux.1 Dev ç¯€é»é€£æ¥åœ–</h4>
                        <div class="workflow-row bg-slate-900/50 p-6 rounded-xl border border-dashed border-slate-600">
                            <div class="node-box text-cyan-200 border-cyan-700 arrow-right">Load Diffusion Model<br><span class="text-xs font-normal text-slate-400">flux1-dev</span></div>
                            <div class="node-box text-blue-200 border-blue-700 arrow-right">DualCLIPLoader<br><span class="text-xs font-normal text-slate-400">t5xxl + clip_l</span></div>
                            <div class="node-box text-green-200 border-green-700 arrow-right">BasicGuider</div>
                            <div class="node-box text-purple-200 border-purple-700">KSampler<br><span class="text-xs font-normal text-slate-400">euler + simple</span></div>
                        </div>
                        <div class="text-center mt-2">
                            <span class="inline-block px-3 py-1 bg-slate-700 text-xs rounded text-slate-300">åˆ¥å¿˜äº†é€£æ¥ VAE Decode -> Save Image</span>
                        </div>
                    </div>

                    <!-- SV4D Workflow Diagram -->
                    <div>
                        <h4 class="text-pink-400 font-bold mb-4 text-center">SV4D 3D è¦–é »ç¯€é»é€£æ¥åœ–</h4>
                        <div class="workflow-row bg-slate-900/50 p-6 rounded-xl border border-dashed border-slate-600">
                            <div class="node-box text-pink-200 border-pink-700 arrow-right">ImageOnly Checkpoint<br><span class="text-xs font-normal text-slate-400">sv4d</span></div>
                            <div class="node-box text-orange-200 border-orange-700 arrow-right">SV4D Conditioning<br><span class="text-xs font-normal text-slate-400">è»Œé“/ä»°è§’åƒæ•¸</span></div>
                            <div class="node-box text-purple-200 border-purple-700 arrow-right">KSampler</div>
                            <div class="node-box text-red-200 border-red-700">VideoCombine<br><span class="text-xs font-normal text-slate-400">è¼¸å‡º MP4</span></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Optimization & Troubleshooting -->
            <div id="tips" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Optimization Card -->
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-lg font-bold text-yellow-400 mb-4 flex items-center gap-2">âš¡ æ€§èƒ½å„ªåŒ–å»ºè­° (Pro Tips)</h3>
                    <ul class="space-y-3 text-sm text-slate-300">
                        <li class="flex gap-2">
                            <span class="text-yellow-500 font-bold">é¡¯å­˜ä¸è¶³?</span>
                            <span>å•Ÿå‹•æ™‚æ·»åŠ  <code class="bg-slate-700 px-1 rounded">--lowvram</code> æˆ–ä½¿ç”¨ GGUF é‡åŒ–æ¨¡å‹ã€‚</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="text-yellow-500 font-bold">åŠ é€Ÿç”Ÿæˆ?</span>
                            <span>å®‰è£ <code class="bg-slate-700 px-1 rounded">pip install xformers</code> ä¸¦æ·»åŠ å•Ÿå‹•åƒæ•¸ <code class="bg-slate-700 px-1 rounded">--use-pytorch-cross-attention</code>ã€‚</span>
                        </li>
                        <li class="flex gap-2">
                            <span class="text-yellow-500 font-bold">è¦–é »å¡é “?</span>
                            <span>SVD å¹€ç‡è¼ƒä½ï¼Œå»ºè­°ä½¿ç”¨ VideoHelperSuite ä¸­çš„ RIFE æ’å¹€ç¯€é»ã€‚</span>
                        </li>
                    </ul>
                </div>

                <!-- Troubleshooting Card -->
                <div class="bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-6 border border-slate-700">
                    <h3 class="text-lg font-bold text-red-400 mb-4 flex items-center gap-2">ğŸ”§ å¸¸è¦‹å•é¡Œæ’æŸ¥</h3>
                    <div class="space-y-3">
                        <details class="group">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none text-slate-300 hover:text-white transition">
                                <span>Torch not compiled with CUDA enabled</span>
                                <span class="transition group-open:rotate-180">â–¼</span>
                            </summary>
                            <p class="text-slate-400 text-sm mt-2 pl-4 border-l-2 border-red-500">
                                é€™æ˜¯æœ€å¸¸è¦‹çš„éŒ¯èª¤ã€‚æ‚¨æ²’æœ‰æ­£ç¢ºå®‰è£ cu121 ç‰ˆæœ¬çš„ PyTorchã€‚è«‹å¸è¼‰ torch ä¸¦é‡æ–°åŸ·è¡Œå®‰è£å‘½ä»¤ã€‚
                            </p>
                        </details>
                        <details class="group">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none text-slate-300 hover:text-white transition">
                                <span>Flux ç”Ÿæˆå…¨æ˜¯å™ªé»/ç°è‰²åœ–</span>
                                <span class="transition group-open:rotate-180">â–¼</span>
                            </summary>
                            <p class="text-slate-400 text-sm mt-2 pl-4 border-l-2 border-red-500">
                                VAE éŒ¯èª¤æˆ–ä¸åŒ¹é…ã€‚è«‹ç¢ºä¿åœ¨ "Load VAE" ç¯€é»ä¸­é¸æ“‡äº†å°ˆç”¨çš„ <code>ae.safetensors</code>ï¼Œè€Œä¸æ˜¯ defaultã€‚
                            </p>
                        </details>
                        <details class="group">
                            <summary class="flex justify-between items-center font-medium cursor-pointer list-none text-slate-300 hover:text-white transition">
                                <span>SV4D å ±éŒ¯ Out of Memory</span>
                                <span class="transition group-open:rotate-180">â–¼</span>
                            </summary>
                            <p class="text-slate-400 text-sm mt-2 pl-4 border-l-2 border-red-500">
                                è¦–é »ç”Ÿæˆæ¥µå…¶æ¶ˆè€—é¡¯å­˜ã€‚å˜—è©¦æ¸›å°‘ `video_length` (å¹€æ•¸) æˆ–é™ä½ `width`/`height` åˆ†è¾¨ç‡ (å»ºè­° 576x576)ã€‚
                            </p>
                        </details>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <footer class="border-t border-slate-800 mt-12 py-8 bg-slate-900">
        <div class="max-w-7xl mx-auto px-4 text-center text-slate-500 text-sm">
            <p>ComfyUI Deployment Guide Visualization</p>
            <p class="mt-2">Based on Source Report: Ubuntu + ComfyUI å…¨èƒ½éƒ¨ç½²æŒ‡å—</p>
        </div>
    </footer>

    <script>
        // --- 1. Navigation Logic ---
        function scrollToSection(id) {
            document.getElementById(id).scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // --- 2. Tab Logic for Models ---
        function switchTab(model) {
            // Hide all contents
            ['flux', 'svd', 'sv4d'].forEach(id => {
                document.getElementById(`content-${id}`).classList.add('hidden');
                document.getElementById(`content-${id}`).classList.remove('block');
                
                // Reset tab styles
                const btn = document.getElementById(`tab-${id}`);
                btn.classList.remove('text-cyan-400', 'border-b-2', 'border-cyan-400', 'bg-slate-800');
                btn.classList.add('text-slate-400');
                
                // Colors per tab
                if(model === 'flux' && id === 'flux') {
                     btn.classList.add('text-cyan-400', 'border-b-2', 'border-cyan-400', 'bg-slate-800');
                     btn.classList.remove('text-slate-400');
                } else if(model === 'svd' && id === 'svd') {
                     btn.classList.add('text-purple-400', 'border-b-2', 'border-purple-400', 'bg-slate-800');
                     btn.classList.remove('text-slate-400');
                } else if(model === 'sv4d' && id === 'sv4d') {
                     btn.classList.add('text-pink-400', 'border-b-2', 'border-pink-400', 'bg-slate-800');
                     btn.classList.remove('text-slate-400');
                }
            });

            // Show selected content
            document.getElementById(`content-${model}`).classList.remove('hidden');
            document.getElementById(`content-${model}`).classList.add('block');
        }

        // --- 3. Copy Code Functionality ---
        function copyCode(btn) {
            const codeBlock = btn.nextElementSibling || btn.parentElement.querySelector('code');
            const text = codeBlock.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.innerText;
                btn.innerText = "å·²è¤‡è£½!";
                btn.classList.add('copied');
                
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.classList.remove('copied');
                }, 2000);
            });
        }

        // --- 4. Chart.js Implementation for VRAM Estimation ---
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('vramChart').getContext('2d');
            
            // Data based on the "Low VRAM" hints in the source text
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Flux.1 Dev (å®Œæ•´ç‰ˆ)', 'Flux.1 Dev (é‡åŒ– FP8)', 'SVD (åœ–ç”Ÿè¦–é »)', 'SV4D (3D è¦–è§’)'],
                    datasets: [{
                        label: 'ä¼°è¨ˆé¡¯å­˜éœ€æ±‚ (VRAM GB)',
                        data: [24, 12, 8, 10], // Estimates based on "24GB recommended" and "Quantized drops to 12GB/8GB"
                        backgroundColor: [
                            'rgba(239, 68, 68, 0.7)',   // Red for High
                            'rgba(234, 179, 8, 0.7)',   // Yellow for Med
                            'rgba(59, 130, 246, 0.7)',  // Blue for Low
                            'rgba(236, 72, 153, 0.7)'   // Pink for SV4D
                        ],
                        borderColor: [
                            'rgba(239, 68, 68, 1)',
                            'rgba(234, 179, 8, 1)',
                            'rgba(59, 130, 246, 1)',
                            'rgba(236, 72, 153, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.y !== null) {
                                        label += context.parsed.y + ' GB';
                                    }
                                    return label;
                                },
                                afterBody: function(context) {
                                    if (context[0].dataIndex === 0) return "å»ºè­°ä½¿ç”¨ RTX 3090/4090";
                                    if (context[0].dataIndex === 1) return "ä½¿ç”¨ GGUF/FP8 å¯å¤§å¹…é™ä½éœ€æ±‚";
                                    return "è§£æåº¦è¶Šé«˜ï¼Œéœ€æ±‚è¶Šé«˜";
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#334155'
                            },
                            ticks: {
                                color: '#94a3b8'
                            },
                            title: {
                                display: true,
                                text: 'GB (Gigabytes)',
                                color: '#cbd5e1'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: '#cbd5e1'
                            }
                        }
                    }
                }
            });

            // Initialize default tab
            switchTab('flux');
        });
    </script>
</body>
</html>
